!function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("./util"),o={initJoinParams:function(e){var t=e.slotId,n=e.embedData,r=e.type,o=e.id,i=e.skinId,a=e.closeClickEmbedData,u=e.moreClickEmbedData,c=e.moreEmbedData;window.Plugin_Act_CFG={slotId:t,embedData:n,activityType:r,activityId:o,closeClickEmbedData:a,skinId:i,moreClickEmbedData:u,moreEmbedData:c,getOrder:"/pluginTools/dojoin",getLottery:"/pluginTools/result"}},getCount:function(e){var t=r.getCache(e);return t&&t.today!=r.getTodayFull()&&(t=null,r.setCache(e,null)),t},setCount:function(e,t){r.setCache(e,t)},foundByKey:function(e,t){if(!(e instanceof Array))return null;for(var n=0,r=e.length;n<r;n++){var o=e[n];if(void 0!=o[t])return o}return null},calCount:function(e,t){var n=""==e?[]:e;if(!(n instanceof Array))return n;if(this.foundByKey(n,t))for(var r=0,o=n.length;r<o;r++){var i=n[r],a=i[t];void 0!=a&&(i[t]=a+1)}else{var u={};u[t]=1,n.push(u)}return n},resetPlugin:function(){$(".plugin-act-popup").remove(),$("body").find('script[src*="pluginAct"]').remove(),$("body").find('link[href*="pluginAct"]').remove()}};t.exports=o},{"./util":2}],2:[function(e,t,n){var r={ajax:function(e){var t={data:{timestamp:(new Date).getTime()},dataType:"json",success:function(){},error:function(e,t){"timeout"===t?(e&&e.abort(),console.error("请求超时")):console.error("网络错误")}};e=$.extend(!0,t,e),$.ajax(e)},getURLParameter:function(e){var t=decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(window.location.href)||[void 0,""])[1].replace(/\+/g,"%20"))||null;return t?t.split("/")[0]:t},getToday:function(){var e=new Date;return e.getMonth()+1+"-"+e.getDate()},getTodayFull:function(){var e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},getCache:function(e){return"undefined"==typeof localStorage?"":JSON.parse(localStorage.getItem(e))},setCache:function(e,t){"undefined"!=typeof localStorage&&localStorage.setItem(e,JSON.stringify(t))}};t.exports=r},{}],3:[function(e,t,n){var r=e("../base/util"),o=e("../base/service"),i="pa-timing",a={getAll:function(){var e=o.getCount(i);if(e&&e.countArray&&0!==e.countArray.length)return e.countArray.map(function(e){var t={closeOrJoin:!1};for(var n in e)"cj"!==n||1!==e[n]?(t.id=n,t.count=e[n]):t.closeOrJoin=!0;return t})},setAppeared:function(e){var t=o.getCount(i);t||(t={today:r.getTodayFull()}),t.countArray=o.calCount(t.countArray||"",e),o.setCount(i,t)},setJoined:function(e){var t=o.getCount(i);if(!t){t={today:r.getTodayFull(),countArray:[]};var n={};n[e]=0,t.countArray.push(n)}var a=o.foundByKey(t.countArray,e);a&&(a.cj=1,o.setCount(i,t))}};t.exports=a},{"../base/service":1,"../base/util":2}],4:[function(e,t,n){function r(){var e=5,t=parseInt(u.getURLParameter("id")||0);return{joinTimes:JSON.stringify(l.getAll()),mainPageId:t,mainPageType:e}}function o(e){e.reset&&e.reset(),e.initOtherPlugin&&e.initOtherPlugin()}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r();u.ajax({url:"/pluginTools/timingIndex",type:"post",data:t,success:function(t){if(t.success){var n=t.data,r=n.id,a=n.skinConfig,u=n.priority;c.resetPlugin(),$("body").append(a),c.initJoinParams(t.data),e.reset&&e.reset(),1===u&&e.show&&e.show(),$(".plugin-act-popup").on("click",".plugin-act-close",function(t){$(".winred").width()||$(".nonepack").width()?i(e):l.setJoined(r)}),$(".plugin-act-popup").on("click",".plugin-act-btn",function(e){l.setAppeared(r)})}else console.error("请求插件出错",t.desc),o(e)},error:function(){console.error("请求插件网络出错"),o(e)}})}function a(e){function t(e){i(e)}t(e)}var u=e("../base/util"),c=e("../base/service"),l=e("./cache");window.TimingPlugin=a},{"../base/service":1,"../base/util":2,"./cache":3}]},{},[4]);