!function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){!function(){var e=t("../../../unit/lib/lib-template/1.0.0/template");t("../../../unit/common/js/scrollload/scrollload");var n=!0,o=1;loadingStatus=!1;var r="/activity/getRecordList",s={loaded:function(t){n=t,loadingStatus=!1,$(".loading-img").hide(),$(".loading-tip").html(""),this.events()},loadederr:function(){loadingStatus=!1,$(".loading-img").hide(),$(".loading-tip").html('加载失败，点击<span class="retry">重试</span>'),$(".loading").bind("click",function(){s.getMoreItems(),$(".loading").unbind("click")})},loading:function(){if(!loadingStatus){if(loadingStatus=!0,0===$(".loading").length){var t='<div class="loading"><img class="loading-img" src="'+host+'/webapp/img/loading.gif"><span class="loading-tip">正在加载中</span></div>';$("body").append(t)}n?($(".loading-img").show(),$(".loading-tip").html("正在加载中"),o++,s.getMoreItems()):($(".loading-img").hide(),$(".loading-tip").html("已经没有更多了！"))}},getMoreItems:function(){var t=this;a(r,{currentPage:o},function(e){if(e.success){var r=e.data,s=[];if(0===r.list.length)return void $(".noRecord").show();for(i in r.list)if(parseInt(r.list[i].remainDay)<0){switch(r.list[i].status){case 2:case 6:r.list[i].resStatus="finish";break;case 5:r.list[i].resStatus="over"}s.push(r.list[i])}var a={data:{list:[]}};a.data.list=s,console.log(a.data.list);for(i in s)s[i].showTooltip=parseInt(s[i].remainDay)<0;if(s.length<1&&e.data.list.length<49)return void $(".noRecord").show();if(n=!!r.totalCount&&Math.ceil(r.totalCount/50)!=o,c(a,$("#obj-item").html(),$(".obj-list")),t.loaded(n),s.length<7){var l='<div class="loading"><span class="loading-tip">已经没有更多了！ </span></div>';$("body").append(l)}window.scrollLoad.scrollLoadImg.init()}else $(".networkError").show()},function(){t.loadederr()})},events:function(){$("body").on("click",".item",function(){var t=$(this).data("status"),e=$(this).data("orderid");switch(t){case"finish":case"over":window.location.href="/activity/indexRecord?vmName=pending&orderId="+e}})}},a=function(t,e,n,i){$.ajax({url:t,type:"get",dataType:"json",data:e,success:n,error:function(t){console.log(t.message||"数据异常，请稍后重试"),i&&i()},complete:function(t){}})},c=function(t,n,i){if(t){var o=e(n,t);return void i.append(o)}};s.getMoreItems(),window.scrollLoad.scrollLoadPage.init({bottom:50,getMoreItems:s.loading}),FastClick(document.body)}()},{"../../../unit/common/js/scrollload/scrollload":2,"../../../unit/lib/lib-template/1.0.0/template":3}],2:[function(t,e,n){!function(t){var e={attr:"data-url",timeout:null},n=t(window),i={init:function(){this.getNode(),this.loading()},_init:function(){this.events()},events:function(){var t=this;n.bind("scroll",function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){t.getNode(),t.loading()},200)})},getNode:function(){e.cache=[],t("["+e.attr+"]").not("[is-load]").each(function(){if(t(this).attr(e.attr)){var n=this.nodeName.toLowerCase(),i=t(this).attr(e.attr),o={obj:t(this),tag:n,url:i};e.cache.push(o)}})},loading:function(){var i=n.height(),o=n.width();if(n.get(0)===window)var r=t(window).scrollTop(),s=t(window).scrollLeft();else var r=n.offset().top,s=n.offset().left;t.each(e.cache,function(t,e){var n,a,c,l,u=e.obj,p=e.tag,g=e.url;u&&(n=u.offset().top-(r+i),a=u.offset().top+u.height()-r,c=u.offset().left-(s+o),l=u.offset().left+u.width()-s,u.is(":visible")&&n<0&&a>0&&c<0&&l>0&&(g?("img"===p?u.attr("src",g):u.css("background-image","url("+g+")"),u.attr("is-load",!0)):console.log("无地址，直接触发回调"),e.obj=null))})}};i._init();var o={bottom:50,getMoreItems:function(){}},r={init:function(e){o=t.extend({},o,e),this.scrollPage()},scrollPage:function(){var e=null;n.bind("scroll",function(){clearTimeout(e),e=setTimeout(function(){var e=t(window).scrollTop(),n=t(window).height(),i=t(document).height(),r=o.bottom;r+e>=i-n&&o.getMoreItems()},200)})}};window.scrollLoad={scrollLoadImg:i,scrollLoadPage:r}}($)},{}],3:[function(t,e,n){(function(t){!function(){var n=function a(){var t=[].slice.call(arguments);return t.push(a.options),t[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&t[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(e,n){var i=document,o=i&&i.getElementById(n);t[0]=o?o.value||o.innerHTML:e}),a.documentHTML&&(a.compile.call(a,a.documentHTML),a.documentHTML=""),1==arguments.length?a.compile.apply(a,t):arguments.length>=2?a.to_html.apply(a,t):void 0},i={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(t){return i.escapehash[t]},escaping:function(t){return"string"!=typeof t?t:t.replace(/[&<>"']/gim,this.escapereplace)},detection:function(t){return"undefined"==typeof t?"":t}},o=function(t){if("undefined"!=typeof console){if(console.warn)return void console.warn(t);if(console.log)return void console.log(t)}throw t},r=function(t,e){if(t=t!==Object(t)?{}:t,t.__proto__)return t.__proto__=e,t;var n=function(){},i=Object.create?Object.create(e):new(n.prototype=e,n);for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);return i},s=function(t){var e,n,i,o=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,r=/,/,s=/^\s*(_?)(\S+?)\1\s*$/,a=/^function[^{]+{([\s\S]*)}/m,c=[];"function"==typeof t?t.length&&(e=t.toString()):"string"==typeof t&&(e=t),e=e.trim(),i=e.match(o),n=e.match(a)[1].trim();for(var l=0;l<i[1].split(r).length;l++){var u=i[1].split(r)[l];u.replace(s,function(t,e,n){c.push(n)})}return[c,n]};n.__cache={},n.version="0.6.14",n.settings={},n.documentHTML="",n.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},n.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:r({__escapehtml:i,__throw:o,__juicer:n},{})},n.tagInit=function(){var t=n.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+n.tags.operationClose,e=n.tags.operationOpen+"\\/each"+n.tags.operationClose,i=n.tags.operationOpen+"if\\s*([^}]*?)"+n.tags.operationClose,o=n.tags.operationOpen+"\\/if"+n.tags.operationClose,r=n.tags.operationOpen+"else"+n.tags.operationClose,s=n.tags.operationOpen+"else if\\s*([^}]*?)"+n.tags.operationClose,a=n.tags.interpolateOpen+"([\\s\\S]+?)"+n.tags.interpolateClose,c=n.tags.noneencodeOpen+"([\\s\\S]+?)"+n.tags.noneencodeClose,l=n.tags.commentOpen+"[^}]*?"+n.tags.commentClose,u=n.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+n.tags.operationClose,p=n.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+n.tags.operationClose,g=n.tags.operationOpen+"helper\\s*([^}]*?)\\s*"+n.tags.operationClose,f="([\\s\\S]*?)",d=n.tags.operationOpen+"\\/helper"+n.tags.operationClose;n.settings.forstart=new RegExp(t,"igm"),n.settings.forend=new RegExp(e,"igm"),n.settings.ifstart=new RegExp(i,"igm"),n.settings.ifend=new RegExp(o,"igm"),n.settings.elsestart=new RegExp(r,"igm"),n.settings.elseifstart=new RegExp(s,"igm"),n.settings.interpolate=new RegExp(a,"igm"),n.settings.noneencode=new RegExp(c,"igm"),n.settings.inlinecomment=new RegExp(l,"igm"),n.settings.rangestart=new RegExp(u,"igm"),n.settings.include=new RegExp(p,"igm"),n.settings.helperRegister=new RegExp(g+f+d,"igm")},n.tagInit(),n.set=function(t,e){var n=this,i=function(t){return t.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(t){return"\\"+t})},o=function(t,e){var o=t.match(/^tag::(.*)$/i);return o?(n.tags[o[1]]=i(e),void n.tagInit()):void(n.options[t]=e)};if(2===arguments.length)return void o(t,e);if(t===Object(t))for(var r in t)t.hasOwnProperty(r)&&o(r,t[r])},n.register=function(t,e){var n=this.options._method;return!n.hasOwnProperty(t)&&(n[t]=e)},n.unregister=function(t){var e=this.options._method;if(e.hasOwnProperty(t))return delete e[t]},n.template=function(e){var i=this;this.options=e,this.__interpolate=function(t,e,n){var i,o=t.split("|"),r=o[0]||"";return o.length>1&&(t=o.shift(),i=o.shift().split(","),r="_method."+i.shift()+".call({}, "+[t].concat(i)+")"),"<%= "+(e?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+r+")) %>"},this.__removeShell=function(t,e){var o=0;return t=t.replace(n.settings.helperRegister,function(t,e,i){var o=s(i),r=o[0],a=o[1],c=new Function(r.join(","),a);return n.register(e,c),t}).replace(n.settings.forstart,function(t,e,n,i){var n=n||"value",i=i&&i.substr(1),r="i"+o++;return"<% ~function() {for(var "+r+" in "+e+") {if("+e+".hasOwnProperty("+r+")) {var "+n+"="+e+"["+r+"];"+(i?"var "+i+"="+r+";":"")+" %>"}).replace(n.settings.forend,"<% }}}(); %>").replace(n.settings.ifstart,function(t,e){return"<% if("+e+") { %>"}).replace(n.settings.ifend,"<% } %>").replace(n.settings.elsestart,function(t){return"<% } else { %>"}).replace(n.settings.elseifstart,function(t,e){return"<% } else if("+e+") { %>"}).replace(n.settings.noneencode,function(t,n){return i.__interpolate(n,!1,e)}).replace(n.settings.interpolate,function(t,n){return i.__interpolate(n,!0,e)}).replace(n.settings.inlinecomment,"").replace(n.settings.rangestart,function(t,e,n,i){var r="j"+o++;return"<% ~function() {for(var "+r+"="+n+";"+r+"<"+i+";"+r+"++) {{var "+e+"="+r+"; %>"}).replace(n.settings.include,function(t,e,n){return e.match(/^file\:\/\//gim)?t:"<%= _method.__juicer("+e+", "+n+"); %>"}),e&&e.errorhandling===!1||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(t,e){return this.__convert(t,!e||e.strip)},this.__lexicalAnalyze=function(e){var i=[],o=[],r="",s=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],a=function(t,e){if(Array.prototype.indexOf&&t.indexOf===Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},c=function(e,r){if(r=r.match(/\w+/gim)[0],a(i,r)===-1&&a(s,r)===-1&&a(o,r)===-1){if("undefined"!=typeof window&&"function"==typeof window[r]&&window[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("undefined"!=typeof t&&"function"==typeof t[r]&&t[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("function"==typeof n.options._method[r]||n.options._method.hasOwnProperty(r))return o.push(r),e;if(r.match(/^\d+/gim))return e;i.push(r)}return e};e.replace(n.settings.forstart,c).replace(n.settings.interpolate,c).replace(n.settings.ifstart,c).replace(n.settings.elseifstart,c).replace(n.settings.include,c).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_0-9]+)/gim,c);for(var l=0;l<i.length;l++)r+="var "+i[l]+"=_."+i[l]+";";for(var l=0;l<o.length;l++)r+="var "+o[l]+"=_method."+o[l]+";";return"<% "+r+" %>"},this.__convert=function(t,e){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=e!==!1?t.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":t.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(t,e){var n=this;return e&&e.loose===!1||(t=this.__lexicalAnalyze(t)+t),t=this.__removeShell(t,e),t=this.__toNative(t,e),this._render=new Function("_, _method",t),this.render=function(t,e){return e&&e===i.options._method||(e=r(e,i.options._method)),n._render.call(this,t,e)},this}},n.compile=function(t,e){e&&e===this.options||(e=r(e,this.options));var n=this,i={get:function(t){return e.cachestore?e.cachestore.get(t):n.__cache[t]},set:function(t,i){return e.cachestore?e.cachestore.set(t,i):n.__cache[t]=i}};try{var s=i.get(t)?i.get(t):new this.template(this.options).parse(t,e);return e&&e.cache===!1||i.set(t,s),s}catch(a){return o("Juicer Compile Exception: "+a.message),{render:function(){}}}},n.to_html=function(t,e,n){return n&&n===this.options||(n=r(n,this.options)),this.compile(t,n).render(e,n._method)},"undefined"!=typeof t&&"undefined"==typeof window&&n.set("cache",!1),"undefined"!=typeof document&&document.body&&(n.documentHTML=document.body.innerHTML),"undefined"!=typeof e&&e.exports?e.exports=n:this.juicer=n}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);