var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function t(o,n,e){function i(l,c){if(!n[l]){if(!o[l]){var s="function"==typeof require&&require;if(!c&&s)return s(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var r=n[l]={exports:{}};o[l][0].call(r.exports,function(t){var n=o[l][1][t];return i(n?n:t)},r,r.exports,t,o,n,e)}return n[l].exports}for(var a="function"==typeof require&&require,l=0;l<e.length;l++)i(e[l]);return i}({1:[function(t,o,n){!function(t){var o=function(t){return this.prize?'<div class="modal-qbdinge modal-container1" ontouchmove="event.preventDefault()">\n\t\t\t\t\t    <span class="modal-close" db-exposure='+t.page1.st_info_dpm_exposure+"\n\t\t\t\t\t    db-click="+t.page1.st_info_dpm_close+'></span>\n\t\t\t\t\t    <div class="modal-dialog">\n\t\t\t\t\t      <div class="modal-body" db-click='+t.page1.st_info_dpm_img_click+'>\n\t\t\t\t\t        <div class="modal-amount" style="font-size:'+(t.amount>9?.4:.5)+'rem">'+t.amount+'</div>\n\t\t\t\t\t      </div>\n\t\t\t\t\t      <div class="modal-btn" db-click='+t.page1.st_info_dpm_click+'></div>\n\t\t\t\t\t      <div class="modal-tip">请在24小时内领取喔，逾期作废</div>\n\t\t\t\t\t    </div>\n\t\t\t\t\t  </div>':""};n.init=o}(Zepto)},{}],2:[function(t,o,n){!function(t){var o=function(t){return this.prize?'<div class="modal-qbdinge modal-container2" ontouchmove="event.preventDefault()">\n\t\t\t\t\t    <span class="modal-close" db-exposure='+t.page2.st_info_dpm_exposure+"\n\t\t\t\t\t    db-click="+t.page2.st_info_dpm_btn_close+'></span>\n\t\t\t\t\t    <div class="modal-dialog">\n\t\t\t\t\t      <div class="modal-body">\n\t\t\t\t\t        <input type="text" class="modal-account" placeholder="输入QQ号领取Q币" value="'+t.aliAccount+'">\n\t\t\t\t\t\t\t\t\t<div class="modal-tip"></div>\n\t\t\t\t\t      </div>\n\t\t\t\t\t\t\t\t<div class="modal-btn"></div>\n\t\t\t\t\t\t\t\t<div class="modal-qbTip">请在24小时内领取喔，逾期作废</div>\n\t\t\t\t\t    </div>\n\t\t\t\t\t  </div>':""};n.init=o}(Zepto)},{}],3:[function(t,o,n){var e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};!function(o){var n=function(t){new i(t)},i=function(n){if("object"===("undefined"==typeof n?"undefined":e(n))){var i={},a=this;if(n.result&&n.result.lottery){var l=n.result.lottery;switch(i={amount:l.amount,page1:l.page1,page2:l.page2,page3:l.page3,aliAccount:l.aliAccount||"",aliName:l.aliName||"",detailContactInfo:n.result.detailContactInfo||{}},l.subType){case 21:a.tpl1=t("./dinge/tpl1").init,a.tpl2=t("./dinge/tpl2").init;break;case 22:a.tpl1=t("./random/tpl1").init,a.tpl2=t("./random/tpl2").init;break;default:a.tpl1=t("./random/tpl1").init,a.tpl2=t("./random/tpl2").init}a.tplResult=t("./result/tpl").init,a.result=n.result,a.callback=n.callback}this.prize=n.prize||{},this.prize=o.extend(!0,i,this.prize),o("body").append(a.tpl1(a.prize)).append(a.tpl2(a.prize)),document.ontouchmove=function(t){t.preventDefault()},n.showPage2&&(o(".modal-container1").hide(),o(".modal-container2").show()),a.exposure(),a.events()}else console.warn("参数错误")};i.prototype.events=function(){var t=this;t.hasClick=!1;var n=o(".modal-container1"),e=o(".modal-container2");n.css("height",o(window).height()),e.css("height",o(window).height()),n.on("touchend",function(){n.css("height",o(window).height()),e.css("height",o(window).height())}),e.on("touchend",function(){e.css("height",o(window).height()),n.css("height",o(window).height())}),n.on("click",".modal-body, .modal-btn",function(){n.hide(),e.show(),t.exposure()}),e.on("click",".modal-btn",function(){t.check(),t.status&&!t.hasClick&&(t.hasClick=!0,t.accountApi(function(n){switch(t.hasClick=!1,t.dbClickBtn(),n.data.result){case"TA-0000000":case"TA-0300001":case"TA-0300002":case"TA-0300003":case"TA-0300005":e.hide(),o("body").append(t.tplResult(t.prize,n.data)),!t.prize.hideBlock&&t.getRecommend(),setTimeout(function(){t.exposure()},500);break;case"TA-0300004":t.showTip(n.data.resultMsg)}}))}),o("body").off("click.modalClose").on("click.modalClose",".modal-close",function(){n.remove(),e.remove(),document.ontouchmove=null,o(".modal-qbresult").remove();var i=t.callback;i&&i.close&&i.close()}),e.on("focus","input",function(){t.hideTip();var n=navigator.userAgent.indexOf("iPhone");n==-1?o(".modal-virtual").css("position","absolute"):o(".modal-virtual").css("position","fixed")}),e.on("blur","input",function(){o(".modal-container1,.modal-container2").css("position","fixed")})},i.prototype.exposure=function(){setTimeout(function(){window.DB&&window.DB.exposure&&window.DB.exposure.initLog()},100)},i.prototype.showTip=function(t){t?o(".modal-container2").find(".modal-tip").text(t).show():o(".modal-container2").find(".modal-tip").show()},i.prototype.hideTip=function(){o(".modal-container2").find(".modal-tip").hide()},i.prototype.check=function(){var t=this,n=(new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),new RegExp("^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\\d{8})$"),new RegExp("^[一-龥]{2,4}$"),new RegExp("^[1-9][0-9]{4,10}$")),e=o(".modal-account")[0];o(".modal-name")[0];return n.test(e.value)?void(t.status=!0):(t.showTip("输入有误，请检查QQ号是否正确"),void(t.status=!1))},i.prototype.dbClickBtn=function(t){var o=JSON.parse(this.prize.page2.st_info_dpm_btn_get);o.domain4Web&&this.sendApi({domain:o.domain4Web,url:o.url,data:o},function(){t&&t()})},i.prototype.accountApi=function(t){var n=this;o.ajax({url:"/alipay/rechargeQB",type:"post",dataType:"json",data:{orderId:n.result.orderId,account:o(".modal-account")[0].value},success:function(o){o.success&&t&&t(o)},error:function(){console.log("rechargeQB error")}})},i.prototype.getRecommend=function(){var t=this;o.ajax({url:"/activity/getRecommend",type:"get",dataType:"json",data:{id:t.getparams("id")||t.result.activityId,login:t.getparams("login")||"normal",appKey:t.getparams("appKey")||null,deviceId:t.getparams("deviceId")||null,slotId:t.getparams("slotId")||null,layerId:21===t.result.lottery.subType?window.dingeQB:window.randomQB,recommendType:5},success:function(t){t.success&&(t.data.block1?(o(".block1").attr("href",t.data.block1.actUrl),o(".block1").find(".recommend-img").attr("src",t.data.block1.bannerUrl),window.DB.exposure.singleExp(t.data.block1.stInfoExposure)):o(".block1, block2").hide(),t.data.block2?(o(".block2").attr("href",t.data.block2.actUrl),o(".block2").find(".recommend-img").attr("src",t.data.block2.bannerUrl),window.DB.exposure.singleExp(t.data.block2.stInfoExposure)):o(".block2").hide())},error:function(){console.log("get recommend queue error")}})},i.prototype.getparams=function(t){var o="[\\?&]"+t+"=([^&#]*)",n=new RegExp(o),e=n.exec(location.href);return null===e?"":e[1]},i.prototype.sendApi=function(t,n,e,i){try{var a=JSON.stringify(t);if(a.indexOf("iframe")!==-1)return}catch(l){console.log("数据异常:"+(l||""))}var c=t.domain||"",s=t.url;delete t.domain,delete t.url,t.data&&t.data.domain&&delete t.data.domain,o.ajax({url:c+s,data:t.data,dataType:"jsonp",type:t.type||"get",jsonpCallback:"tracks",complete:function(){n&&n()},success:function(t){e&&e(t)},error:function(t){i&&i(t)}})},window.showQBPrize=n}(Zepto)},{"./dinge/tpl1":1,"./dinge/tpl2":2,"./random/tpl1":4,"./random/tpl2":5,"./result/tpl":6}],4:[function(t,o,n){!function(t){var o=function(t){return this.prize?'<div class="modal-qbrandom modal-container1" ontouchmove="event.preventDefault()">\n\t\t\t\t\t    <span class="modal-close" db-exposure='+t.page1.st_info_dpm_exposure+"\n\t\t\t\t\t    db-click="+t.page1.st_info_dpm_close+'></span>\n\t\t\t\t\t    <div class="modal-dialog">\n\t\t\t\t\t      <div class="modal-body" db-click='+t.page1.st_info_dpm_click+'></div>\n\t\t\t\t\t      <i class="modal-hand1"></i>\n\t\t\t\t\t      <i class="modal-hand2"></i>\n\t\t\t\t\t      <i class="modal-coin1"></i>\n\t\t\t\t\t      <i class="modal-coin2"></i>\n\t\t\t\t\t    </div>\n\t\t\t\t\t  </div>':""};n.init=o}(Zepto)},{}],5:[function(t,o,n){!function(t){var o=function(t){return this.prize?'<div class="modal-qbrandom modal-container2" ontouchmove="event.preventDefault()">\n              <span class="modal-close" db-exposure='+t.page2.st_info_dpm_exposure+"\n              db-click="+t.page2.st_info_dpm_btn_close+'></span>\n              <div class="modal-dialog">\n                <div class="modal-body">\n                  <div class="modal-amount">'+t.amount+'<span>Q币</span></div>\n                  <input type="text" class="modal-account" placeholder="输入QQ号领取Q币" value="'+t.aliAccount+'">\n                  <div class="modal-tip"></div>\n                  <div class="modal-btn"></div>\n                </div>\n              </div>\n            </div>':""};n.init=o}(Zepto)},{}],6:[function(t,o,n){!function(t){var o=function(t,o){if(!this.prize)return"";var n=void 0;n="TA-0000000"===o.result?'<div class="modal-desc modal-success">已经到账啦！</div>':'<div class="modal-desc">正在火速处理中，查看进度请点击<a href="/activity/indexRecord?vmName=list"><span class="result-btn" db-click='+t.page3.st_info_dpm_btn_get+">我的奖品</span></a></div>";var e=this.prize.hideBlock?"":'<div class="more">更多福利</div><a class="block1"><img src="" class="recommend-img"></a><a class="block2"><img src="" class="recommend-img"></a>',i=this.prize.detailContactInfo.isOpenOptionDetail?'<div class="modal-contact">客服：<i class="icon-phone"></i>'+t.detailContactInfo.optionDetailPhone+"</div>":"";return'<div class="modal-qbresult" ontouchmove="event.preventDefault()">\n              <span class="modal-close" db-exposure='+t.page3.st_info_dpm_exposure+"\n              db-click="+t.page3.st_info_dpm_btn_close+'></span>\n              <div class="modal-dialog">\n                <div class="modal-animate">\n                  <i class="modal-coin"></i>\n                  <div class="modal-head">\n                    '+n+"\n                    "+i+"\n                  </div>\n                  "+e+"\n                </div>\n              </div>\n            </div>"};n.init=o}(Zepto)},{}]},{},[3]);